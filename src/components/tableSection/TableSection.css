.table-section {
  display: grid;
  gap: 20px;
  padding: 20px;
  box-sizing: border-box;
  max-height: calc(100vh - 180px); /* Increased space allowance */
  min-height: 600px; /* Ensure minimum height for content */
  width: 100%;
  height: 100%;
  overflow: visible; /* Allow content to be visible */
}

/* Individual table width limits based on count */
.table-count-1 .table-component-wrapper {
  max-width: 100%;
}

.table-count-2 .table-component-wrapper {
  max-width: 100%;
}

.table-count-3 .table-component-wrapper {
  max-width: 100%;
}

.table-count-4 .table-component-wrapper {
  max-width: 100%;
}

.table-count-5 .table-component-wrapper {
  max-width: 100%;
}

.table-count-6 .table-component-wrapper {
  max-width: 100%;
}

/* 1 Table: Full width */
.table-count-1 {
  grid-template-columns: 1fr;
  grid-template-rows: 1fr;
}

/* 2 Tables: Stacked vertically */
.table-count-2 {
  grid-template-columns: 1fr;
  grid-template-rows: 1fr 1fr;
}

/* 3 Tables: 2 on top side by side, 1 below */
.table-count-3 {
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr; /* Two equal height rows */
  min-height: 0; /* Allow grid items to shrink */
}

.table-count-3 > *:nth-child(1) {
  grid-column: 1;
  grid-row: 1;
}

.table-count-3 > *:nth-child(2) {
  grid-column: 2;
  grid-row: 1;
}

.table-count-3 > *:nth-child(3) {
  grid-column: 1 / -1;
  grid-row: 2;
  min-height: 200px; /* Ensure bottom table has minimum height */
}

/* 4 Tables: 2x2 grid */
.table-count-4 {
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
}

/* 5 Tables: 2 on top, 2 in middle, 1 at bottom */
.table-count-5 {
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr 1fr;
}

.table-count-5 > *:nth-child(5) {
  grid-column: 1 / -1;
  grid-row: 3;
}

/* Responsive behavior */
@media (max-width: 1200px) {
  .table-count-3,
  .table-count-4,
  .table-count-5,
  .table-count-6 {
    grid-template-columns: 1fr;
    grid-template-rows: repeat(auto, 1fr);
  }

  .table-count-3 > *:nth-child(3),
  .table-count-5 > *:nth-child(5) {
    grid-column: 1;
  }

  /* Reduce table width on medium screens */
  .table-component-wrapper {
    max-width: 100%;
  }
}

@media (max-width: 768px) {
  .table-section {
    gap: 15px;
    padding: 15px;
    max-height: calc(100vh - 100px); /* More space on mobile */
    min-height: 500px; /* Ensure minimum space */
  }

  /* All tables stack vertically on mobile */
  .table-section {
    grid-template-columns: 1fr !important;
    grid-template-rows: repeat(
      auto,
      minmax(200px, 1fr)
    ) !important; /* Ensure minimum height per row */
  }

  .table-section > * {
    grid-column: 1 !important;
  }

  /* Mobile optimizations for table scrolling */
  .table-component-wrapper {
    max-width: 100%;
    min-height: 200px; /* Smaller minimum on mobile */
  }
}
